pico-8 cartridge // http://www.pico-8.com
version 27
__lua__
-- porklike jr. -- by ladsby
function _init()
	t=0
	p_ani={21,22,23,24}
	
	dirx={-1,1,0,0}
	diry={0,0,-1,1}
	
	_upd=update_game
	_drw=draw_game
	
	start_game()
end

function _update()
	t+=1
	_upd()
end

function _draw()
	_drw()
end

function start_game()
	p_x=2
	p_y=5
	p_ox=0 --player offset
	p_oy=0
end

-->8
--updates

function update_game()
	if btnp(⬅️) then -- or 0
		p_x -= 1
		p_ox = 8
		_upd=update_pturn
	end
	if btnp(➡️) then -- or 1
		p_x += 1
		p_ox = -8
		_upd=update_pturn
	end
	if btnp(⬆️) then -- or 2
		p_y -= 1
		p_oy = 8
		_upd=update_pturn
	end
	if btnp(⬇️) then -- or 3
		p_y += 1
		p_oy = -8
		_upd=update_pturn
	end	
end

function update_pturn()
	if p_ox>0 then
		p_ox-=1
	end
	if p_ox<0 then
		p_ox+=1
	end
	if p_oy>0 then
		p_oy-=1
	end
	if p_oy<0 then
		p_oy+=1
	end
	if p_ox==0 and p_oy==0 then
		_upd=update_game
	end
end

function update_gameover()

end
-->8
--draws

function draw_game()
	cls(0)
	map()
	
	draw_spr(
		get_frame(p_ani),
		p_x*8+p_ox,
		p_y*8+p_oy
	)
end

function draw_gameover()

end
-->8
--tools

-- takes an array of animations
-- and returns the next frame
function get_frame(ani) 
	-- #ani = length of ary

	return ani[
		flr(t / 7) % #ani + 1
	]
end

function draw_spr(_spr,_x,_y,_c)
	palt(0, false) -- makes black non-transparent
	-- pal(6, _c) -- changes gray to input color
	
	spr(_spr,_x,_y)
end

__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000090900000000000009090000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000009090000999900000909000099990000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000099990000090999009999000009099900000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000009099900099999000909990009999900000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000d09999900d00000000999990d00000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000dd0000000dd0dd000dd00000dd0ddd0000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000dd0ddd0d0dd0dd000dd0dd00dd0ddd0d00000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000d00d00000dd00000d00d00000dd00000000000000000000000000000000000000000000000000000000000
60666060000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66606660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
60666060000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66606660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
55555550a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000a0aa00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
55000000a0aa0aa00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
5505500000aa0aa00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
55055050a0000aa00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
55055050a0aa00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
55055050a0aa0aa00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0000000000000000000021000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000020202020202020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000020312121212120000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000002020212121212120000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0020202021212121212120000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0020300021212121212120000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0020202020202020202020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
